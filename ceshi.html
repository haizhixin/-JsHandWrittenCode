<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        //对象深拷贝 基本原理递归
        //考虑以下情况
        // 1,区分数组
        // 2,处理循环引用
        // 3,处理引用丢失
        // 4,处理symbol属性
        // 5,处理不可枚举属性
        // 6,处理原型上继承的属性
        // 7,处理正则 处理日期队对象 处理函数
        // 8,处理栈溢出

        function deepClone(source,hashMap = new WeakMap()) {
            if(typeof source !=="object" || source===null) {
                throw new TypeError(source+"is not a Oject")
            }
            if(hashMap.has(source)) {
                return hashMap.get(source)
            }
            var target = Array.isArray(source)?[]:{};
            hashMap.set(source,target)
            for(let key in source) {
                if(Object.prototype.hasOwnProperty.call(source,key)){
                    if(typeof source[key] ==='object' && source[key]!==null){
                        target[key] = deepClone(source[key],hashMap)
                    } else {
                        target[key] = source[key]
                    }
                }

            }

            return target

        }

    </script>
</body>

</html>