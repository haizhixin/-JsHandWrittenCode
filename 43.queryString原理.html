<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        // 参考链接 https://www.zhihu.com/search?type=content&q=js%E8%A7%A3%E6%9E%90url

        // https://www.jb51.net/article/157127.htm
        // var str = "http://m.chinaeduins.com/qidongDetails?promoCode=123&partnerSource=123&123"
        // var str_esc = escape(str);
        // console.log(str_esc)
        // console.log(unescape(str_esc))
        // 实现一个方法拆解URL参数中queryString
        // https://mp.weixin.qq.com/s/TiCKdapPIaUiMGUlmBN7Bw


        const url = 'http://sample.com/?a=1&b=2&c=xx&d=2#hash';

        const queryString = (str) => {
            const obj = {}
            str.replace(/([^?&=]+)=([^&]+)/g, (_, k, v) => {
                console.log(_, k, v)
                // (obj[k] = v)

            })
            return obj
        }

        queryString(url)




        // function getParams(u) {
        //     const s = new URLSearchParams(u.search)
        //     const obj = {}
        //     s.forEach((v, k) => (obj[k] = v))
        //     return obj
        // }

        // const url = 'http://sample.com/?a=1&b=2&c=xx&d=2#hash';
        // getParams(new URL(url))



        const dismantle = (url) => {
            const aimUrl = url.split('?').pop().split('#').shift().split('&');
            const res = {};
            aimUrl.forEach(item => {
                const [key, val] = item.split('=');
                res[key] = val;
            });
            console.log(res, "res")
            return res;
        }
        dismantle(url)
    </script>
</body>

</html>